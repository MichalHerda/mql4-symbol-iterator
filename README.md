# symbolIterator.mq4  
Advanced Multi-Symbol Market Scanner & Metrics Generator

## Overview
`symbolIterator.mq4` is a high-performance analytical tool designed for batch-processing market data across all available symbols in MetaTrader 4.  
Its primary role is to scan instruments, compute trend-related metrics, generate swing analysis, and produce sortable datasets used by other expert advisors, scripts, and research tools.

This module **does not execute trades** and does **not** send any orders.  
It functions strictly as a *data collector, screener, and metric generator*.

---

## Key Features

### ğŸ” Multi-Symbol Scanning
- Iterates through **all available symbols** in the MT4 environment.
- Extracts key price, trend, and indicator values for each instrument.

### ğŸ“ˆ Trend Metrics
For every symbol, the module calculates:
- Current trend direction (via multi-timeframe moving averages)
- Trend duration
- Trend strength (normalized based on historical range)
- Trend start timestamp
- Price position within monthly range (price ratio)

### ğŸ“Š Indicator-Based Analysis
- Conditional ADX computation (enabled only if trend alignment occurs across timeframes)
- Moving average combinations configurable via external modules
- Automated detection of swing highs/lows for the active chart symbol

### ğŸ§® Data Exports
Outputs multiple sorted analytical files:
- `trendDuration.txt`
- `priceRatio.txt`
- `trendStrength.txt`
- `mainAdx.txt`
- Additional logs and structured data arrays

These files allow downstream EAs and tools to access pre-sorted rankings of instruments based on custom metrics.

### ğŸ•’ Smart Timer Scheduling
The script starts with a 1-second timer and automatically aligns itself to the nearest **5-minute grid** (e.g., :00, :05, :10...).  
After alignment, it switches to a 5-minute interval to ensure consistent periodic scanning.

### ğŸ§¹ Automatic Cleanup
All chart objects generated by associated analysis modules are removed during deinitialization.

---

## Internal Architecture

The script uses modular architecture via multiple `.mqh` components:

- `symbolInfo.mqh` â€” symbol metadata  
- `structsEnumsArrays.mqh` â€” unified data structures  
- `globalInputs.mqh` â€” configuration inputs  
- `unitTests.mqh` â€” internal test utilities  
- `swing.mqh` â€” swing high/low extraction  
- `calculations.mqh` â€” trend & strength models  
- `chartIndicators.mqh` â€” supplementary chart data  
- `sort.mqh` â€” custom sorting algorithms  
- `fillArrays.mqh` â€” array construction & data filling  

This architecture ensures fast processing, readable code, and strict separation of logic.

---

## Use Cases

- Market scanning for trend-based strategies  
- Symbol ranking for EA decision support  
- Data preprocessing for machine learning models  
- Multi-symbol analysis for portfolio selection  
- Automated reporting for technical research  

Since the script **does not modify account state**, it is safe to run on:
- demo accounts  
- live accounts  
- strategy tester (for structural validation)

---

## Limitations
- Heavy processing may temporarily increase terminal load when scanning hundreds of symbols.
- Depends on market data availability for each symbol (MA/ADX calculation requires sufficient history).
- Output files are overwritten each cycleâ€”ensure you export/backup if long-term comparison is needed.

---

## Disclaimer
This module performs analytical operations **only**.  
It does not execute trades, does not send orders, and does not affect live positions.

No trading risk is associated with running this script.

---

## License
Â© 2024 MichaÅ‚ Herda â€” All rights reserved.  
This code is provided for research, analysis, and educational purposes.

